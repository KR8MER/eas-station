<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="1200" height="900" viewBox="0 0 1200 900" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="deploy-title">
  <title id="deploy-title">System Deployment - Hardware Architecture</title>
  <desc>Physical deployment diagram showing Raspberry Pi 5 connections with peripherals, storage, and external interfaces</desc>

  <defs>
    <linearGradient id="dep-grad-pi" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#c2185b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ad1457;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="dep-grad-container" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2563eb;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="dep-grad-peripheral" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="dep-grad-external" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d97706;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="dep-grad-storage" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7c3aed;stop-opacity:1" />
    </linearGradient>

    <filter id="dep-shadow">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.25"/>
    </filter>

    <marker id="dep-arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#334155" />
    </marker>
    <marker id="dep-arrow-usb" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#059669" />
    </marker>
    <marker id="dep-arrow-gpio" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#dc2626" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1200" height="900" fill="#f8fafc"/>

  <!-- Title -->
  <text x="600" y="35" font-family="Arial, sans-serif" font-size="28" font-weight="bold" text-anchor="middle" fill="#1e293b">
    EAS Station Hardware Deployment
  </text>
  <text x="600" y="60" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#64748b">
    Raspberry Pi 5 Reference Architecture with Peripherals and External Connections
  </text>

  <!-- Main Raspberry Pi 5 Container -->
  <rect x="350" y="150" width="500" height="550" rx="12" fill="#fce4ec" stroke="#c2185b" stroke-width="3"/>

  <!-- Pi 5 Header -->
  <rect x="350" y="150" width="500" height="60" rx="12" fill="url(#dep-grad-pi)"/>
  <rect x="350" y="190" width="500" height="20" fill="url(#dep-grad-pi)"/>
  <text x="600" y="178" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="white">
    Raspberry Pi 5 (8GB)
  </text>
  <text x="600" y="202" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
    BCM2712 • Cortex-A76 @ 2.4GHz • 8GB LPDDR4X
  </text>

  <!-- Docker Engine -->
  <rect x="370" y="230" width="460" height="48" rx="6" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
  <text x="600" y="260" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#1e40af">
    Docker Engine 24+ (Compose V2)
  </text>

  <!-- Docker Containers -->
  <g id="containers">
    <!-- Web App Container -->
    <rect x="380" y="300" width="220" height="116" rx="6" fill="url(#dep-grad-container)" filter="url(#dep-shadow)"/>
    <text x="490" y="322" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="white">Web Application</text>
    <text x="490" y="342" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#dbeafe">Python 3.12 • Flask</text>
    <text x="490" y="362" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#dbeafe">Port 5000 • UI &amp; REST</text>
    <text x="490" y="382" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#bfdbfe">EAS Workflow</text>

    <!-- Poller Container -->
    <rect x="620" y="300" width="110" height="116" rx="6" fill="url(#dep-grad-container)" filter="url(#dep-shadow)"/>
    <text x="675" y="322" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">CAP Poller</text>
    <text x="675" y="342" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#dbeafe">NOAA Feeds</text>
    <text x="675" y="362" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#bfdbfe">Background Svc</text>

    <!-- IPAWS Container -->
    <rect x="750" y="300" width="100" height="116" rx="6" fill="url(#dep-grad-container)" filter="url(#dep-shadow)"/>
    <text x="800" y="322" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">IPAWS</text>
    <text x="800" y="342" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#dbeafe">FEMA Alerts</text>
    <text x="800" y="362" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#bfdbfe">Polling</text>

    <!-- Database Container -->
    <rect x="380" y="436" width="470" height="110" rx="6" fill="url(#dep-grad-container)" filter="url(#dep-shadow)"/>
    <text x="615" y="458" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="white">PostgreSQL 17 + PostGIS 3.4</text>
    <text x="615" y="478" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#dbeafe">Port 5432 • CAP Alerts • Boundaries • Receivers</text>
    <text x="615" y="498" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#bfdbfe">Spatial Intelligence • EAS Messages • Health</text>
  </g>

  <!-- Storage (inside Pi) -->
  <rect x="380" y="570" width="470" height="110" rx="6" fill="url(#dep-grad-storage)" filter="url(#dep-shadow)"/>
  <text x="615" y="592" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">NVMe SSD Storage</text>
  <text x="615" y="612" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#ede9fe">PCIe Gen 2.0 • 256GB+ recommended</text>
  <text x="615" y="635" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#ddd6fe">pgdata • static/audio • logs • iq_captures • backups</text>

  <!-- Anchor points on Pi edges (for clean, non-overlapping routes) -->
  <!-- Left anchors -->
  <circle cx="350" cy="300" r="0" id="anch-left-300"/>
  <circle cx="350" cy="360" r="0" id="anch-left-360"/>
  <circle cx="350" cy="420" r="0" id="anch-left-420"/>
  <!-- Right anchors -->
  <circle cx="850" cy="245" r="0" id="anch-right-245"/>
  <circle cx="850" cy="352" r="0" id="anch-right-352"/>
  <circle cx="850" cy="360" r="0" id="anch-right-360"/>
  <circle cx="850" cy="470" r="0" id="anch-right-470"/>
  <circle cx="850" cy="570" r="0" id="anch-right-570"/>
  <!-- Bottom anchors -->
  <circle cx="585" cy="700" r="0" id="anch-bot-585"/>
  <circle cx="775" cy="700" r="0" id="anch-bot-775"/>
  <circle cx="965" cy="700" r="0" id="anch-bot-965"/>

  <!-- USB Peripherals (Left Side) -->
  <g id="usb-left">
    <!-- RTL-SDR -->
    <rect x="30" y="195" width="160" height="90" rx="6" fill="url(#dep-grad-peripheral)" filter="url(#dep-shadow)"/>
    <text x="110" y="215" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">RTL-SDR v3</text>
    <text x="110" y="235" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#d1fae5">USB 2.0/3.0 • 162 MHz</text>
    <text x="110" y="253" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#a7f3d0">/dev/bus/usb</text>
    <path d="M 190,240 H 320 V 300 H 350" stroke="#10b981" stroke-width="3" stroke-dasharray="6,5" fill="none" marker-end="url(#dep-arrow-usb)"/>
    <text x="225" y="232" font-family="Arial, sans-serif" font-size="10" fill="#065f46">USB 3.0</text>

    <!-- Airspy -->
    <rect x="30" y="315" width="160" height="90" rx="6" fill="url(#dep-grad-peripheral)" filter="url(#dep-shadow)"/>
    <text x="110" y="335" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Airspy Mini</text>
    <text x="110" y="355" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#d1fae5">Backup • USB 2.0/3.0</text>
    <text x="110" y="373" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#a7f3d0">/dev/bus/usb</text>
    <path d="M 190,360 H 350" stroke="#10b981" stroke-width="3" stroke-dasharray="6,5" fill="none" marker-end="url(#dep-arrow-usb)"/>
    <text x="225" y="350" font-family="Arial, sans-serif" font-size="10" fill="#065f46">USB</text>

    <!-- USB Sound Card -->
    <rect x="30" y="435" width="160" height="90" rx="6" fill="url(#dep-grad-peripheral)" filter="url(#dep-shadow)"/>
    <text x="110" y="455" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">USB Audio DAC</text>
    <text x="110" y="475" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#d1fae5">ALSA hw:1,0</text>
    <text x="110" y="493" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#a7f3d0">Balanced out</text>
    <path d="M 190,480 H 320 V 420 H 350" stroke="#10b981" stroke-width="3" stroke-dasharray="6,5" fill="none" marker-end="url(#dep-arrow-usb)"/>
    <text x="225" y="472" font-family="Arial, sans-serif" font-size="10" fill="#065f46">USB 2.0</text>
  </g>

  <!-- GPIO / Network / Video / PCIe (Right Side) -->
  <g id="peripherals-right">
    <!-- GPIO Relay HAT -->
    <rect x="910" y="190" width="170" height="100" rx="6" fill="url(#dep-grad-peripheral)" filter="url(#dep-shadow)"/>
    <text x="995" y="210" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">GPIO Relay HAT</text>
    <text x="995" y="230" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#d1fae5">40-pin • Multi-relay</text>
    <text x="995" y="248" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#a7f3d0">PTT • LED power</text>
    <path d="M 910,240 H 850" stroke="#dc2626" stroke-width="3" fill="none" marker-end="url(#dep-arrow-gpio)"/>
    <text x="870" y="232" font-family="Arial, sans-serif" font-size="10" fill="#7f1d1d">GPIO</text>

    <!-- Ethernet -->
    <rect x="910" y="320" width="170" height="80" rx="6" fill="url(#dep-grad-peripheral)" filter="url(#dep-shadow)"/>
    <text x="995" y="342" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Gigabit Ethernet</text>
    <text x="995" y="362" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#d1fae5">RJ45 • 1000 Mbps</text>
    <path d="M 910,360 H 850" stroke="#3b82f6" stroke-width="3" fill="none" marker-end="url(#dep-arrow)"/>
    <text x="870" y="352" font-family="Arial, sans-serif" font-size="10" fill="#1e40af">ETH</text>

    <!-- HDMI Monitor -->
    <rect x="910" y="430" width="170" height="80" rx="6" fill="url(#dep-grad-peripheral)" filter="url(#dep-shadow)"/>
    <text x="995" y="452" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">HDMI Monitor</text>
    <text x="995" y="472" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#d1fae5">Dual µHDMI • 4K60</text>
    <path d="M 910,470 H 850" stroke="#6366f1" stroke-width="3" fill="none" marker-end="url(#dep-arrow)"/>
    <text x="870" y="462" font-family="Arial, sans-serif" font-size="10" fill="#4338ca">HDMI</text>

    <!-- PCIe Storage -->
    <rect x="910" y="530" width="170" height="80" rx="6" fill="url(#dep-grad-storage)" filter="url(#dep-shadow)"/>
    <text x="995" y="552" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">PCIe HAT+</text>
    <text x="995" y="572" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#ede9fe">PCIe 2.0 x1 • NVMe</text>
    <path d="M 910,570 H 850" stroke="#8b5cf6" stroke-width="3" fill="none" marker-end="url(#dep-arrow)"/>
    <text x="870" y="562" font-family="Arial, sans-serif" font-size="10" fill="#6b21a8">PCIe</text>
  </g>

  <!-- External Connections (Bottom) -->
  <g id="external">
    <!-- Internet -->
    <ellipse cx="150" cy="780" rx="90" ry="45" fill="url(#dep-grad-external)" filter="url(#dep-shadow)"/>
    <text x="150" y="775" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="white">Internet</text>
    <text x="150" y="793" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#fef9c3">CAP Feeds</text>

    <!-- Route Internet to a dedicated WAN anchor (no overlap with ETH line) -->
    <path d="M 240,780 H 320 V 352 H 845 V 352 H 850" stroke="#3b82f6" stroke-width="2" stroke-dasharray="8,4" fill="none" marker-end="url(#dep-arrow)"/>

    <!-- FM Transmitter -->
    <rect x="320" y="740" width="150" height="80" rx="6" fill="url(#dep-grad-external)" filter="url(#dep-shadow)"/>
    <text x="395" y="762" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">FM Transmitter</text>
    <text x="395" y="782" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#fef9c3">EAS broadcast • PTT</text>
    <!-- PTT via GPIO -->
    <path d="M 470,740 V 688 H 845 V 245" stroke="#dc2626" stroke-width="2" fill="none" marker-end="url(#dep-arrow)"/>
    <text x="700" y="682" font-family="Arial, sans-serif" font-size="10" fill="#7f1d1d">PTT Relay</text>

    <!-- LED Sign -->
    <rect x="510" y="740" width="150" height="80" rx="6" fill="url(#dep-grad-external)" filter="url(#dep-shadow)"/>
    <text x="585" y="762" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">LED Sign</text>
    <text x="585" y="782" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#fef9c3">Alpha • RS-232/USB</text>
    <path d="M 585,740 V 700" stroke="#3b82f6" stroke-width="2" fill="none" marker-end="url(#dep-arrow)"/>

    <!-- Operator Browser -->
    <rect x="700" y="740" width="150" height="80" rx="6" fill="url(#dep-grad-external)" filter="url(#dep-shadow)"/>
    <text x="775" y="762" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Web Browser</text>
    <text x="775" y="782" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#fef9c3">Operator UI • http://pi:5000</text>
    <path d="M 775,740 V 700" stroke="#3b82f6" stroke-width="2" fill="none" marker-end="url(#dep-arrow)"/>

    <!-- Audio Output -->
    <rect x="890" y="740" width="150" height="80" rx="6" fill="url(#dep-grad-external)" filter="url(#dep-shadow)"/>
    <text x="965" y="762" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Audio System</text>
    <text x="965" y="782" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#fef9c3">Balanced • SAME</text>
    <path d="M 965,740 V 700" stroke="#10b981" stroke-width="2" fill="none" marker-end="url(#dep-arrow)"/>
  </g>

  <!-- Legend -->
  <g id="legend" transform="translate(50, 560)">
    <rect x="0" y="0" width="160" height="140" rx="6" fill="white" stroke="#cbd5e1" stroke-width="2" filter="url(#dep-shadow)"/>
    <text x="80" y="20" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#1e293b">Connections</text>

    <path d="M 12,38 H 60" stroke="#10b981" stroke-width="3" stroke-dasharray="6,5" fill="none" marker-end="url(#dep-arrow-usb)"/>
    <text x="70" y="41" font-family="Arial, sans-serif" font-size="10" fill="#475569">USB 2.0/3.0</text>

    <path d="M 12,58 H 60" stroke="#dc2626" stroke-width="3" fill="none" marker-end="url(#dep-arrow-gpio)"/>
    <text x="70" y="61" font-family="Arial, sans-serif" font-size="10" fill="#475569">GPIO</text>

    <path d="M 12,78 H 60" stroke="#3b82f6" stroke-width="3" fill="none" marker-end="url(#dep-arrow)"/>
    <text x="70" y="81" font-family="Arial, sans-serif" font-size="10" fill="#475569">Network/Data</text>

    <path d="M 12,98 H 60" stroke="#6366f1" stroke-width="3" fill="none" marker-end="url(#dep-arrow)"/>
    <text x="70" y="101" font-family="Arial, sans-serif" font-size="10" fill="#475569">HDMI Video</text>

    <path d="M 12,118 H 60" stroke="#8b5cf6" stroke-width="3" fill="none" marker-end="url(#dep-arrow)"/>
    <text x="70" y="121" font-family="Arial, sans-serif" font-size="10" fill="#475569">PCIe</text>
  </g>

  <!-- Cost Box -->
  <rect x="230" y="560" width="120" height="95" rx="6" fill="#dcfce7" stroke="#16a34a" stroke-width="2" filter="url(#dep-shadow)"/>
  <text x="290" y="580" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#166534">Total Cost</text>
  <text x="290" y="602" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#15803d">~$585</text>
  <text x="290" y="620" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#166534">vs. DASDEC3 $5–7k</text>
  <text x="290" y="635" font-family="Arial, sans-serif" font-size="9" font-weight="bold" text-anchor="middle" fill="#15803d">~90% savings</text>

  <!-- Footer -->
  <text x="600" y="885" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">
    Reference deployment: Raspberry Pi 5 (8GB) + NVMe SSD + SDR receivers + Audio HAT + GPIO relays | See README.md for details
  </text>
</svg>
