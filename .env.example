# NOAA CAP Emergency Alert System environment configuration
# Copy this file to `.env` and update the placeholders before running the stack.

# -----------------------------------------------------------------------------
# Core application settings
# -----------------------------------------------------------------------------
SECRET_KEY=replace-with-a-long-random-string
APP_BUILD_VERSION=2.2.0
NOAA_USER_AGENT=KR8MER Emergency Alert Hub/2.1 (+https://github.com/KR8MER/noaa_alerts_systems; NOAA+IPAWS)

# -----------------------------------------------------------------------------
# Database connection (PostgreSQL + PostGIS)
# Update POSTGRES_PASSWORD for any production deployment.
# -----------------------------------------------------------------------------
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=alerts
POSTGRES_USER=postgres
POSTGRES_PASSWORD=change-me
# DATABASE_URL can override the values above when provided; leave blank to build it automatically.
# DATABASE_URL=

# -----------------------------------------------------------------------------
# Poller and logging behaviour
# -----------------------------------------------------------------------------
POLL_INTERVAL_SEC=180
# Optional override for CAP pollers; comma-separated list applied when set on a service.
CAP_ENDPOINTS=
# Default IPAWS CAP feed list consumed by the ipaws-poller service (comma-separated)
# Leave empty to use auto-fallback with dynamic timestamp (recommended)
IPAWS_CAP_FEED_URLS=
# Optional fallback settings when no IPAWS feed list is supplied
IPAWS_DEFAULT_LOOKBACK_HOURS=12
# IPAWS_DEFAULT_START=2024-02-15T12:00:00Z
# IPAWS_DEFAULT_ENDPOINT_TEMPLATE=https://tdl.apps.fema.gov/IPAWSOPEN_EAS_SERVICE/rest/public/recent/{timestamp}
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# Optional LED sign integration
# Leave LED_SIGN_IP blank to disable Alpha sign output.
# -----------------------------------------------------------------------------
LED_SIGN_IP=
LED_SIGN_PORT=10001

# -----------------------------------------------------------------------------
# SAME / EAS broadcaster configuration
# Set EAS_BROADCAST_ENABLED=true to activate audio generation and GPIO relay control.
# -----------------------------------------------------------------------------
EAS_BROADCAST_ENABLED=false
EAS_OUTPUT_DIR=static/eas_messages
EAS_OUTPUT_WEB_SUBDIR=eas_messages
EAS_ORIGINATOR=WXR
EAS_STATION_ID=EASNODES
EAS_ATTENTION_TONE_SECONDS=8
EAS_SAMPLE_RATE=44100
EAS_AUDIO_PLAYER=aplay
EAS_GPIO_PIN=
EAS_GPIO_ACTIVE_STATE=HIGH
# Relay stays active for the whole alert (including the EOM burst); this is the minimum hold after playback.
EAS_GPIO_HOLD_SECONDS=5
# Text-to-speech provider (azure, pyttsx3, or leave blank to disable narration)
EAS_TTS_PROVIDER=
# Comma-separated SAME/FIPS codes authorized for manual CAP broadcasts and the quick RWT preset.
# Use ALL (or US/USA) to authorize the entire nationwide registry bundled with the project.
EAS_MANUAL_FIPS_CODES=039137
# SAME event codes authorized for manual CAP forwarding (ALL, TESTS, or comma-separated list)
# TESTS expands to RWT, RMT, DMO, NPT. Leave blank to authorise all codes.
EAS_MANUAL_EVENT_CODES=TESTS

# -----------------------------------------------------------------------------
# Optional pyttsx3 (offline TTS) configuration
# -----------------------------------------------------------------------------
# PYTTSX3_VOICE=com.apple.speech.synthesis.voice.Alex
# PYTTSX3_RATE=180
# PYTTSX3_VOLUME=0.8

# -----------------------------------------------------------------------------
# Optional Azure AI Speech voiceover configuration (legacy)
# Leave AZURE_SPEECH_KEY blank to fall back to the built-in tone generator.
# -----------------------------------------------------------------------------
AZURE_SPEECH_KEY=
AZURE_SPEECH_REGION=
# Uncomment to override the default neural voice or synthesized sample rate.
# AZURE_SPEECH_VOICE=en-US-AriaNeural
# AZURE_SPEECH_SAMPLE_RATE=24000

# -----------------------------------------------------------------------------
# Optional Azure OpenAI TTS voiceover configuration (recommended)
# Modern OpenAI TTS voices hosted on Azure - higher quality than Azure Speech.
# Set EAS_TTS_PROVIDER=azure_openai to use this.
# -----------------------------------------------------------------------------
AZURE_OPENAI_ENDPOINT=
AZURE_OPENAI_KEY=
# Available voices: alloy, echo, fable, onyx, nova, shimmer
AZURE_OPENAI_VOICE=alloy
# Model: tts-1 (fast) or tts-1-hd (high quality, recommended)
AZURE_OPENAI_MODEL=tts-1-hd
# Speed: 0.25 to 4.0 (1.0 is normal, increase for faster emergency broadcasts)
AZURE_OPENAI_SPEED=1.0

# -----------------------------------------------------------------------------
# Optional location defaults for the admin UI
# -----------------------------------------------------------------------------
DEFAULT_TIMEZONE=America/New_York
DEFAULT_COUNTY_NAME=Putnam County
DEFAULT_STATE_CODE=OH
DEFAULT_ZONE_CODES=OHZ016,OHC137
DEFAULT_AREA_TERMS=PUTNAM COUNTY,PUTNAM CO,OTTAWA,LEIPSIC,PANDORA,GLANDORF,KALIDA,FORT JENNINGS,COLUMBUS GROVE,DUPONT,MILLER CITY,OTTOVILLE
DEFAULT_MAP_CENTER_LAT=41.0195
DEFAULT_MAP_CENTER_LNG=-84.1190
DEFAULT_MAP_ZOOM=9
DEFAULT_LED_LINES=PUTNAM COUNTY,EMERGENCY MGMT,NO ALERTS,SYSTEM READY
