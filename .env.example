# =============================================================================
# EAS Station Configuration
# =============================================================================
# Copy this file to `.env` and update the values before running docker compose.
# Generate SECRET_KEY with: python3 -c 'import secrets; print(secrets.token_hex(32))'

# =============================================================================
# CORE SETTINGS (REQUIRED)
# =============================================================================

SECRET_KEY=replace-with-a-long-random-string

# Flask configuration
FLASK_DEBUG=false
FLASK_APP=app.py
FLASK_RUN_HOST=0.0.0.0
FLASK_RUN_PORT=5000
FLASK_ENV=production

# =============================================================================
# HTTPS / SSL CONFIGURATION
# =============================================================================

# Domain name for SSL certificate (required for Let's Encrypt)
# Use your actual domain name (e.g., eas.example.com)
# For local testing, use "localhost" (will generate self-signed certificate)
DOMAIN_NAME=localhost

# Email for Let's Encrypt certificate notifications
SSL_EMAIL=admin@example.com

# Use Let's Encrypt staging server for testing (0=production, 1=staging)
# Set to 1 when testing to avoid rate limits
CERTBOT_STAGING=0

# =============================================================================
# DATABASE (PostgreSQL + PostGIS)
# =============================================================================

# Use host.docker.internal for external database, or alerts-db for embedded mode
POSTGRES_HOST=host.docker.internal
POSTGRES_PORT=5432
POSTGRES_DB=alerts
POSTGRES_USER=postgres
POSTGRES_PASSWORD=change-me

# =============================================================================
# ALERT POLLING
# =============================================================================

# Poll interval in seconds (default: 180 = 3 minutes)
POLL_INTERVAL_SEC=180
CAP_TIMEOUT=30

# NOAA User Agent (REQUIRED for NOAA API compliance)
NOAA_USER_AGENT=KR8MER Emergency Alert Hub/2.1 (+https://github.com/KR8MER/eas-station; NOAA+IPAWS)

# Optional: Override feed URLs (comma-separated)
CAP_ENDPOINTS=
IPAWS_CAP_FEED_URLS=
IPAWS_DEFAULT_LOOKBACK_HOURS=12

# =============================================================================
# LOCATION SETTINGS
# =============================================================================

DEFAULT_TIMEZONE=America/New_York
DEFAULT_COUNTY_NAME=Putnam County
DEFAULT_STATE_CODE=OH
DEFAULT_ZONE_CODES=OHZ016,OHC137
DEFAULT_AREA_TERMS=PUTNAM COUNTY,PUTNAM CO,OTTAWA,LEIPSIC,PANDORA,GLANDORF,KALIDA,FORT JENNINGS,COLUMBUS GROVE,DUPONT,MILLER CITY,OTTOVILLE

# Map display settings
DEFAULT_MAP_CENTER_LAT=41.0195
DEFAULT_MAP_CENTER_LNG=-84.1190
DEFAULT_MAP_ZOOM=9

# =============================================================================
# EAS BROADCAST (SAME/EAS ENCODER)
# =============================================================================

# Enable EAS audio generation (true/false)
EAS_BROADCAST_ENABLED=false

# EAS identification
EAS_ORIGINATOR=WXR
EAS_STATION_ID=EASNODES

# Audio generation
EAS_OUTPUT_DIR=static/eas_messages
EAS_ATTENTION_TONE_SECONDS=8
EAS_SAMPLE_RATE=44100
EAS_AUDIO_PLAYER=aplay

# Authorization for manual broadcasts (FIPS codes and event codes)
EAS_MANUAL_FIPS_CODES=039137
EAS_MANUAL_EVENT_CODES=TESTS

# GPIO relay control (leave blank to disable)
EAS_GPIO_PIN=
EAS_GPIO_ACTIVE_STATE=HIGH
EAS_GPIO_HOLD_SECONDS=5

# =============================================================================
# TEXT-TO-SPEECH (OPTIONAL)
# =============================================================================

# Provider: azure, azure_openai, pyttsx3, or blank to disable
EAS_TTS_PROVIDER=

# Azure OpenAI TTS (recommended for best quality)
AZURE_OPENAI_ENDPOINT=
AZURE_OPENAI_KEY=
AZURE_OPENAI_VOICE=alloy
AZURE_OPENAI_MODEL=tts-1-hd
AZURE_OPENAI_SPEED=1.0

# Azure AI Speech (legacy)
AZURE_SPEECH_KEY=
AZURE_SPEECH_REGION=

# =============================================================================
# LED DISPLAY (OPTIONAL)
# =============================================================================

# Alpha protocol LED sign (leave blank to disable)
LED_SIGN_IP=
LED_SIGN_PORT=10001
DEFAULT_LED_LINES=PUTNAM COUNTY,EMERGENCY MGMT,NO ALERTS,SYSTEM READY

# =============================================================================
# VFD DISPLAY (OPTIONAL)
# =============================================================================

# Noritake GU140x32F-7000B graphical VFD display (leave blank to disable)
VFD_PORT=/dev/ttyUSB0
VFD_BAUDRATE=38400

# =============================================================================
# NOTIFICATIONS (OPTIONAL)
# =============================================================================

ENABLE_EMAIL_NOTIFICATIONS=false
ENABLE_SMS_NOTIFICATIONS=false

# Email settings (if enabled)
MAIL_SERVER=
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USERNAME=
MAIL_PASSWORD=

# =============================================================================
# LOGGING & PERFORMANCE
# =============================================================================

LOG_LEVEL=INFO
LOG_FILE=logs/eas_station.log

# Web server access logs (true to enable, false to disable)
# When disabled, only error logs are shown to reduce clutter
WEB_ACCESS_LOG=false

CACHE_TIMEOUT=300
MAX_WORKERS=2
UPLOAD_FOLDER=/app/uploads

# =============================================================================
# BACKUP & RECOVERY
# =============================================================================

# Backup directory (default: /var/backups/eas-station)
BACKUP_DIR=/var/backups/eas-station

# =============================================================================
# DOCKER/INFRASTRUCTURE
# =============================================================================

TZ=America/New_York
WATCHTOWER_LABEL_ENABLE=true
WATCHTOWER_MONITOR_ONLY=false
ALERTS_DB_IMAGE=postgis/postgis:17-3.4
