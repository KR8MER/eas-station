# NOAA CAP Emergency Alert System environment configuration
# Copy this file to `.env` and update the placeholders before running the stack.

# -----------------------------------------------------------------------------
# Flask application configuration
# -----------------------------------------------------------------------------
FLASK_ENV=production
FLASK_APP=app.py
FLASK_RUN_HOST=0.0.0.0
FLASK_RUN_PORT=5000
SECRET_KEY=replace-with-a-long-random-string
APP_BUILD_VERSION=2.1.7
NOAA_USER_AGENT=KR8MER CAP Alert System/2.1 (+https://github.com/KR8MER/noaa_alerts_systems)

# -----------------------------------------------------------------------------
# Database connection (PostgreSQL + PostGIS)
# Update POSTGRES_PASSWORD for any production deployment!
# Point these values at an existing PostgreSQL/PostGIS deployment. Update
# POSTGRES_PASSWORD for any production deployment!
# -----------------------------------------------------------------------------
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=alerts
POSTGRES_USER=postgres
POSTGRES_PASSWORD=change-me
# DATABASE_URL is generated automatically from the values above when left blank.
# DATABASE_URL=

# -----------------------------------------------------------------------------
# Poller behaviour
# -----------------------------------------------------------------------------
POLL_INTERVAL_SEC=180
CAP_TIMEOUT=30

# -----------------------------------------------------------------------------
# File paths and logging
# -----------------------------------------------------------------------------
UPLOAD_FOLDER=/app/uploads
LOG_FILE=logs/noaa_alerts.log
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# Optional LED sign integration
# Leave LED_SIGN_IP blank to disable Alpha sign output.
# -----------------------------------------------------------------------------
LED_SIGN_IP=
LED_SIGN_PORT=10001

# -----------------------------------------------------------------------------
# SAME / EAS broadcaster configuration
# Set EAS_BROADCAST_ENABLED=true to activate audio generation and GPIO relay control.
# -----------------------------------------------------------------------------
EAS_BROADCAST_ENABLED=false
EAS_OUTPUT_DIR=static/eas_messages
EAS_OUTPUT_WEB_SUBDIR=eas_messages
EAS_ORIGINATOR=WXR
EAS_STATION_ID=EASNODES
EAS_CALL_SIGN=EASNODES
EAS_AUDIO_PLAYER=aplay
EAS_ATTENTION_TONE_SECONDS=8
EAS_GPIO_PIN=
EAS_GPIO_ACTIVE_STATE=HIGH
# Relay stays active for the whole alert (including the EOM burst); this is the minimum hold after playback.
EAS_GPIO_HOLD_SECONDS=5
# Comma-separated SAME/FIPS codes authorized for manual CAP broadcasts (defaults to Putnam County, OH)
# Use ALL (or US/USA) to authorize the entire nationwide registry bundled with the project.
EAS_MANUAL_FIPS_CODES=039137
# SAME event codes authorized for manual CAP forwarding (ALL, TESTS, or comma-separated list)
# Leave blank for all codes; example below forwards routine tests only
EAS_MANUAL_EVENT_CODES=TESTS
EAS_SAMPLE_RATE=44100

# -----------------------------------------------------------------------------
# Optional Azure AI Speech voiceover configuration
# Leave AZURE_SPEECH_KEY blank to fall back to the built-in tone generator.
# -----------------------------------------------------------------------------
AZURE_SPEECH_KEY=
AZURE_SPEECH_REGION=
# Uncomment to override the default neural voice or synthesized sample rate.
# AZURE_SPEECH_VOICE=en-US-AriaNeural
# AZURE_SPEECH_SAMPLE_RATE=24000

# -----------------------------------------------------------------------------
# Optional notification settings (disabled by default)
# -----------------------------------------------------------------------------
ENABLE_EMAIL_NOTIFICATIONS=false
ENABLE_SMS_NOTIFICATIONS=false
MAIL_SERVER=
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USERNAME=
MAIL_PASSWORD=

# -----------------------------------------------------------------------------
# Performance tuning
# -----------------------------------------------------------------------------
CACHE_TIMEOUT=300
MAX_WORKERS=2
