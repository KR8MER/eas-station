# ============================================================================
# EAS Station - Minimal Configuration
# ============================================================================
#
# This is a simplified configuration file with only the essential settings.
# For advanced options, see stack.env.example
#
# Quick Start:
# 1. Deploy the stack
# 2. Navigate to http://localhost/setup to run the Setup Wizard
# 3. The wizard will generate SECRET_KEY and save all config to persistent storage
#
# Note: SECRET_KEY is NOT configured here - it's managed by the Setup Wizard
# and stored in the persistent volume to survive redeployments.
#
# ============================================================================

# ----------------------------------------------------------------------------
# REQUIRED: Security
# ----------------------------------------------------------------------------
# SECRET_KEY is managed by the Setup Wizard and stored in persistent volume
# Do NOT set it here - it will override the persistent configuration
# SECRET_KEY=

# ----------------------------------------------------------------------------
# HTTPS / SSL Configuration
# ----------------------------------------------------------------------------
# Domain name for SSL certificate (required for Let's Encrypt HTTPS)
# For local testing: use "localhost" (generates self-signed certificate)
# For production: use your actual domain (e.g., eas.example.com)
DOMAIN_NAME=localhost

# Email for Let's Encrypt certificate expiration notifications
SSL_EMAIL=admin@example.com

# Let's Encrypt staging mode (0=production, 1=staging/testing)
# Use staging=1 for testing to avoid rate limits
CERTBOT_STAGING=0

# ----------------------------------------------------------------------------
# REQUIRED: Database Connection
# ----------------------------------------------------------------------------
# Using embedded database (docker-compose.embedded-db.yml)? Leave these commented out
# The embedded database uses these defaults:
#   POSTGRES_HOST=alerts-db
#   POSTGRES_USER=postgres
#   POSTGRES_PASSWORD=postgres
#   POSTGRES_DB=alerts
#
# Using external database? Uncomment and set your credentials:
# POSTGRES_HOST=your-database-host
# POSTGRES_PORT=5432
# POSTGRES_DB=alerts
# POSTGRES_USER=postgres
# POSTGRES_PASSWORD=change-me

# ----------------------------------------------------------------------------
# Location Settings (Defaults for Admin UI)
# ----------------------------------------------------------------------------
# Set these to your county/timezone - they appear as defaults in the web UI
DEFAULT_TIMEZONE=America/New_York
DEFAULT_COUNTY_NAME=Putnam County
DEFAULT_STATE_CODE=OH

# SAME zone codes for your area (comma-separated)
# Find yours at: https://www.weather.gov/nwr/station_listing
DEFAULT_ZONE_CODES=OHZ016,OHC137

# Area keywords to watch for in alerts (comma-separated, uppercase)
DEFAULT_AREA_TERMS=PUTNAM COUNTY,OTTAWA,LEIPSIC

# Map center (lat, lng, zoom)
DEFAULT_MAP_CENTER_LAT=41.0195
DEFAULT_MAP_CENTER_LNG=-84.1190
DEFAULT_MAP_ZOOM=9

# ----------------------------------------------------------------------------
# Optional: SDR Hardware
# ----------------------------------------------------------------------------
# Which SoapySDR drivers to include in the Docker image
# Options: rtlsdr, airspy, hackrf, bladerf, lime, uhd
# Use comma-separated list or leave as-is for RTL-SDR + Airspy
SOAPYSDR_DRIVERS=rtlsdr,airspy

# Git commit hash (leave blank to auto-detect from repository at build time)
GIT_COMMIT=

# ----------------------------------------------------------------------------
# Optional: LED Sign (Alpha Protocol)
# ----------------------------------------------------------------------------
# Leave blank to disable LED sign integration
LED_SIGN_IP=
LED_SIGN_PORT=10001

# Default text to show on LED (4 lines for Alpha signs)
DEFAULT_LED_LINES=PUTNAM COUNTY,EMERGENCY MGMT,NO ALERTS,SYSTEM READY

# ----------------------------------------------------------------------------
# Optional: EAS Broadcast (Audio Generation & GPIO Relay)
# ----------------------------------------------------------------------------
# Enable EAS audio generation and transmitter keying
EAS_BROADCAST_ENABLED=false

# Station identification (8 characters max)
EAS_STATION_ID=EASNODES

# GPIO pin for transmitter relay (leave blank to disable)
EAS_GPIO_PIN=
EAS_GPIO_ACTIVE_STATE=HIGH
EAS_GPIO_HOLD_SECONDS=5
EAS_GPIO_WATCHDOG_SECONDS=300
GPIO_ADDITIONAL_PINS=
# JSON map of BCM pins to behavior lists (managed through GPIO Pin Map UI)
GPIO_PIN_BEHAVIOR_MATRIX=

# ----------------------------------------------------------------------------
# Optional: Text-to-Speech
# ----------------------------------------------------------------------------
# TTS provider: azure, azure_openai, pyttsx3 (or leave blank to disable)
EAS_TTS_PROVIDER=

# If using Azure OpenAI TTS (recommended):
AZURE_OPENAI_ENDPOINT=
AZURE_OPENAI_KEY=
AZURE_OPENAI_VOICE=alloy
AZURE_OPENAI_MODEL=tts-1-hd

# ----------------------------------------------------------------------------
# Polling & Logging
# ----------------------------------------------------------------------------
# How often to check for new alerts (seconds)
POLL_INTERVAL_SEC=180

# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# Web server access logs (true to enable, false to disable)
# When disabled, only error logs are shown to reduce clutter
WEB_ACCESS_LOG=false

# ----------------------------------------------------------------------------
# Optional: Icecast Audio Streaming (RECOMMENDED)
# ----------------------------------------------------------------------------
# Icecast provides professional-quality audio streaming for monitoring
# Enable it for smooth, reliable playback with no frame drops
#
# The Icecast server starts automatically with the stack
# With auto-configuration enabled, streaming works out of the box!
#
# SECURITY: Change these passwords in production!
# The default source password enables zero-config but should be changed
ICECAST_PORT=8001
ICECAST_INTERNAL_PORT=8000
ICECAST_ADMIN_USER=admin
ICECAST_ADMIN_PASSWORD=changeme_admin
ICECAST_SOURCE_PASSWORD=eas_station_source_password
ICECAST_RELAY_PASSWORD=changeme_relay
ICECAST_HOSTNAME=localhost
ICECAST_CONTACT=admin@example.com

# CRITICAL for remote servers: Set this to your server's public hostname or IP
# If running on a remote server/data center, browsers need this to connect to Icecast
# Examples:
#   ICECAST_PUBLIC_HOSTNAME=eas.example.com
#   ICECAST_PUBLIC_HOSTNAME=192.168.1.100
#   ICECAST_PUBLIC_HOSTNAME=my-server.ddns.net
# Leave blank ONLY if accessing from the same machine (localhost)
ICECAST_PUBLIC_HOSTNAME=
#
# Note: Port 8001 is used to avoid conflict with Portainer (port 8000)
# The container uses port 8000 internally, mapped to 8001 externally
#
# After starting the stack:
# 1. Icecast admin panel: http://localhost:8001/admin/
# 2. Configure in EAS Station: /settings/audio
#    - Server: icecast (or localhost if not in Docker)
#    - Port: 8000 (if app is in Docker) or 8001 (if app on host)
#    - Source Password: (value from ICECAST_SOURCE_PASSWORD above)
# 3. Audio streams will be available at: http://localhost:8001/source-name

# ----------------------------------------------------------------------------
# Advanced: See stack.env.example for more options
# ----------------------------------------------------------------------------
# - IPAWS feed configuration
# - Email/SMS notifications
# - Performance tuning
# - Custom CAP endpoints
# - And much more...
