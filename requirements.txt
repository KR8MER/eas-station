# EAS Station Requirements
# Copyright (c) 2025 Timothy Kramer (KR8MER)
# Licensed under AGPL v3 or Commercial License
# See LICENSE and LICENSE-COMMERCIAL files
#
# NOTE: PostgreSQL with the PostGIS extension is required for spatial
# functionality, but it must be provisioned in its own container or
# service. These packages only cover the Python client libraries that
# communicate with the external database instance.
#
# Core Flask and web framework dependencies
Flask==3.0.3
Flask-SQLAlchemy==3.1.1
Flask-Caching==2.3.0
Flask-SocketIO==5.4.1
python-socketio==5.11.4
Werkzeug==3.0.6

# Database dependencies
SQLAlchemy==2.0.44
psycopg2-binary==2.9.10
GeoAlchemy2==0.15.2
Alembic==1.14.0

# HTTP client for API calls
requests==2.32.3
httpx==0.27.2  # Modern async HTTP client with connection pooling

# Timezone handling (CRITICAL FOR PROPER TIME DISPLAY)
pytz==2024.2

# System monitoring
psutil==6.1.1

# Environment variables
python-dotenv==1.0.1

# YAML parsing for compose file validation
PyYAML==6.0.2

# JSON handling - Optimized parsers for better performance
orjson==3.10.12  # Fast C-based JSON parser (2-3x faster than stdlib)
ujson==5.10.0  # Alternative fast JSON parser (fallback option)

# Datetime parsing - More robust than manual strptime
python-dateutil==2.9.0.post0  # Flexible datetime string parsing

# XML parsing - Optimized for CAP alert processing
lxml==5.3.0  # Fast C-based XML parser (5-10x faster than ElementTree)

# Document and spreadsheet exports
openpyxl==3.1.5

# Production WSGI server
gunicorn==23.0.0

# Async worker for Gunicorn (CRITICAL for Flask-SocketIO WebSocket support)
# Flask-SocketIO requires either gevent or eventlet when using Gunicorn
# gevent is preferred for production use
gevent==24.2.1

# Redis for state management and worker coordination
# Replaces fragile file-based coordination with robust distributed state
redis==5.0.8
hiredis==3.0.0  # C parser for better Redis performance

# Development and debugging (optional)
# flask-debugtoolbar==0.13.1  # Uncomment for development

# Testing framework (required for web UI test runner)
pytest==8.3.4
pytest-asyncio==0.24.0  # For async test support

# Optional speech synthesis support
# azure-cognitiveservices-speech==1.38.0  # Required when enabling Azure AI voiceovers
pyttsx3==2.90  # Offline text-to-speech engine for the pyttsx3 provider

# Audio processing for EAS decoding
scipy==1.14.1  # Optional: Advanced signal processing (not used for EAS resampling)
pydub==0.25.1  # Audio stream decoding (MP3, AAC, OGG) for HTTP/Icecast streams
# Note: pydub requires ffmpeg to be installed via system packages (libavcodec, libavformat)
# Note: EAS monitor uses numpy's linear interpolation for efficient resampling on Raspberry Pi

# SDR support for radio receivers
numpy==2.2.1  # Required for SoapySDR sample processing
# Note: SoapySDR Python bindings are installed via system packages in Dockerfile

# VFD Display support (Noritake GU140x32F-7000B)
pyserial==3.5  # Serial communication for VFD display
Pillow==10.4.0  # Image processing for VFD graphics rendering

# OLED display support (Argon Industria SSD1306 module)
luma.oled==3.14.0  # I2C SSD1306/SH1106 driver used by the Argon OLED

# GPIO control for Raspberry Pi hardware
gpiozero==2.0.1

# Multi-Factor Authentication (MFA) support
pyotp==2.9.0  # TOTP (Time-based One-Time Password) generation and verification
qrcode==8.0  # QR code generation for MFA enrollment

# Geospatial data processing
pyshp==2.3.1  # Shapefile reader for converting boundary files to GeoJSON
